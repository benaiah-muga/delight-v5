"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{3303:function(e,s,t){t.d(s,{q:function(){return withAdminLayout}});var a=t(5893),r=t(7294),n=t(1163),i=t(1664),l=t.n(i),o=t(5181),c=t(6521),d=t(1205);function AdminLayout(e){let{children:s,title:t="Admin Dashboard"}=e,[i,m]=(0,r.useState)(!1),{theme:x,toggleTheme:h,isDemoMode:u}=(0,c.rV)(),{user:g,logout:f}=(0,o.aC)(),p=(0,n.useRouter)();(0,r.useEffect)(()=>{"dark"===x?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[x]);let handleLogout=async()=>{let e=await fetch("/api/logout",{method:"POST"});e.ok&&p.push("/admin/login")};return(0,a.jsxs)("div",{className:"min-h-screen ".concat("dark"===x?"bg-gray-900":"bg-gray-100"),children:[(0,a.jsx)(d.Z,{isOpen:i,onClose:()=>m(!1),isAdmin:!0}),(0,a.jsx)("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:(0,a.jsxs)("div",{className:"flex flex-col flex-grow ".concat("dark"===x?"bg-gray-800":"bg-white"," pt-5 pb-4 overflow-y-auto"),children:[(0,a.jsxs)("div",{className:"flex items-center flex-shrink-0 px-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-white text-indigo-700 rounded flex items-center justify-center font-bold text-xl mr-3",children:"DH"}),(0,a.jsx)("span",{className:"text-white text-xl font-semibold ".concat("dark"===x?"text-white":"text-gray-700"),children:"Admin Panel"})]}),(0,a.jsx)("nav",{className:"mt-5 flex-1 flex flex-col divide-y divide-indigo-800 overflow-y-auto","aria-label":"Sidebar",children:(0,a.jsx)("div",{className:"px-2 space-y-1",children:[{name:"Dashboard",href:"/admin",icon:"tachometer-alt"},{name:"Properties",href:"/admin/properties",icon:"home"},{name:"Messages",href:"/admin/messages",icon:"envelope"},{name:"Users",href:"/admin/users",icon:"users"},{name:"Settings",href:"/admin/settings",icon:"cog",demo:u}].map(e=>(0,a.jsxs)(l(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(e.demo?"cursor-not-allowed opacity-50":""," ").concat("dark"===x?"text-gray-300 hover:bg-gray-700 hover:text-white":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)("svg",{className:"mr-3 h-6 w-6 ".concat("dark"===x?"text-gray-400 group-hover:text-white":"text-gray-500 group-hover:text-gray-900"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:e.icon})}),e.name]},e.name))})})]})}),(0,a.jsxs)("div",{className:"lg:pl-64 flex flex-col flex-1",children:[(0,a.jsxs)("div",{className:"relative z-10 flex-shrink-0 flex h-16 ".concat("dark"===x?"bg-gray-800":"bg-white"," border-b border-gray-200 lg:border-none"),children:[(0,a.jsxs)("button",{type:"button",className:"px-4 border-r border-gray-200 text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 lg:hidden",onClick:()=>m(!0),children:[(0,a.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,a.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex justify-between lg:px-6 lg:max-w-6xl mx-auto",children:[(0,a.jsx)("div",{className:"flex-1 flex",children:(0,a.jsx)("div",{className:"w-full flex md:ml-0",children:(0,a.jsxs)("div",{className:"relative w-full text-gray-400 focus-within:text-gray-600",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pointer-events-none",children:(0,a.jsx)("i",{className:"fas fa-search ".concat("dark"===x?"text-gray-400":"text-gray-500")})}),(0,a.jsx)("input",{id:"search",name:"search",className:"block w-full h-full pl-8 pr-3 py-2 border-transparent ".concat("dark"===x?"bg-gray-700 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent":"bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-0 focus:border-transparent"," sm:text-sm"),placeholder:"Search",type:"search"})]})})}),(0,a.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,a.jsxs)("div",{className:"ml-3 relative",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsxs)("div",{className:"text-sm font-medium ".concat("dark"===x?"text-white":"text-gray-700"),children:[(null==g?void 0:g.name)||"User",u&&(0,a.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Demo"})]}),(0,a.jsx)("div",{className:"text-xs font-medium ".concat("dark"===x?"text-gray-400":"text-gray-500"),children:(null==g?void 0:g.email)||"user@example.com"})]}),(0,a.jsxs)("button",{type:"button",className:"max-w-xs bg-white rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",id:"user-menu","aria-expanded":"false","aria-haspopup":"true",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-600 flex items-center justify-center text-white font-medium",children:(null==g?void 0:g.name)?g.name.charAt(0).toUpperCase():"A"})]})]}),(0,a.jsxs)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu",children:[[{name:"Your Profile",href:"#"},{name:"Settings",href:"/admin/settings"}].map(e=>(0,a.jsx)(l(),{href:e.href,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:e.name},e.name)),(0,a.jsx)("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-500 focus:outline-none",title:"Switch to ".concat("dark"===x?"light":"dark"," mode"),children:"dark"===x?(0,a.jsx)("i",{className:"fas fa-sun h-5 w-5"}):(0,a.jsx)("i",{className:"fas fa-moon h-5 w-5"})}),(0,a.jsx)("button",{onClick:handleLogout,className:"p-2 text-gray-400 hover:text-gray-500 focus:outline-none",title:"Sign out",children:(0,a.jsx)("i",{className:"fas fa-sign-out-alt h-5 w-5"})})]})]})})]})]}),(0,a.jsxs)("main",{className:"flex-1 pb-8",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"px-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8",children:(0,a.jsxs)("div",{className:"py-6 md:flex md:items-center md:justify-between lg:border-t lg:border-gray-200",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("h1",{className:"text-2xl font-bold leading-7 text-gray-900 sm:leading-9 sm:truncate",children:["dashboard"===activeNav&&"Dashboard","properties"===activeNav&&"Properties","messages"===activeNav&&"Messages","settings"===activeNav&&"Settings"]})}),(0,a.jsx)("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:"properties"===activeNav&&(0,a.jsx)(l(),{href:"/admin/properties/new",className:"ml-3 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Property"})})]})})}),(0,a.jsx)("div",{className:"mt-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:s})})]})]})]})}function withAdminLayout(e){return function(s){let[t,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),c=(0,n.useRouter)();return(0,r.useEffect)(()=>{let fetchUser=async()=>{let e=await fetch("/api/session");if(e.ok){let s=await e.json();o(s)}else c.push("/admin/login")};fetchUser()},[c]),(0,a.jsx)(AdminLayout,{user:l,profileOpen:t,setProfileOpen:i,children:(0,a.jsx)(e,{...s,user:l})})}}AdminLayout.defaultProps={profileOpen:!1,setProfileOpen:()=>{}}}}]);
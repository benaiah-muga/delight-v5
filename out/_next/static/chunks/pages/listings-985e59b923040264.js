(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{2123:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/listings",function(){return s(9733)}])},9733:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return ListingsPage}});var t=s(5893),l=s(7294),i=s(1163),a=s(9008),n=s.n(a),o=s(5675),c=s.n(o),d=s(1664),m=s.n(d);function ListingsPage(){let[e,r]=(0,l.useState)([]),[s,a]=(0,l.useState)([]),[o,d]=(0,l.useState)(!0),[u,x]=(0,l.useState)({search:"",minPrice:"",maxPrice:"",propertyType:"",bedrooms:""}),[h,p]=(0,l.useState)("price-asc");(0,i.useRouter)(),(0,l.useEffect)(()=>{let fetchProperties=async()=>{try{let e=await fetch("/api/properties"),s=await e.json();r(s),a(s)}catch(e){console.error("Error fetching properties:",e)}finally{d(!1)}};fetchProperties()},[]),(0,l.useEffect)(()=>{let r=[...e];if(u.search){let e=u.search.toLowerCase();r=r.filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e))}if(u.minPrice){let e=parseInt(u.minPrice.replace(/[^0-9]/g,""));r=r.filter(r=>{let s=parseInt(r.price.replace(/[^0-9]/g,""));return s>=e})}if(u.maxPrice){let e=parseInt(u.maxPrice.replace(/[^0-9]/g,""));r=r.filter(r=>{let s=parseInt(r.price.replace(/[^0-9]/g,""));return s<=e})}u.propertyType&&(r=r.filter(e=>e.title.toLowerCase().includes(u.propertyType.toLowerCase()))),r.sort((e,r)=>{let s=parseInt(e.price.replace(/[^0-9]/g,"")),t=parseInt(r.price.replace(/[^0-9]/g,""));switch(h){case"price-asc":return s-t;case"price-desc":return t-s;case"title-asc":return e.title.localeCompare(r.title);case"title-desc":return r.title.localeCompare(e.title);default:return 0}}),a(r)},[u,e,h]);let handleFilterChange=e=>{let{name:r,value:s}=e.target;x(e=>({...e,[r]:s}))},clearFilters=()=>{x({search:"",minPrice:"",maxPrice:"",propertyType:"",bedrooms:""}),p("price-asc")};return o?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Property Listings | Delight Homes"}),(0,t.jsx)("meta",{name:"description",content:"Browse our selection of premium properties in Kampala, Uganda"})]}),(0,t.jsx)("div",{className:"bg-blue-700 text-white py-16",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight",children:"Find Your Dream Property"}),(0,t.jsx)("p",{className:"mt-3 max-w-2xl mx-auto text-xl text-blue-100",children:"Browse our selection of premium properties in Kampala, Uganda"})]})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsx)("div",{className:"lg:w-1/4",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm sticky top-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Filters"}),(0,t.jsx)("button",{onClick:clearFilters,className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear all"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,t.jsx)("input",{type:"text",id:"search",name:"search",value:u.search,onChange:handleFilterChange,placeholder:"Search by name or description",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Price Range (UGX)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"minPrice",className:"sr-only",children:"Min Price"}),(0,t.jsx)("input",{type:"text",id:"minPrice",name:"minPrice",value:u.minPrice,onChange:handleFilterChange,placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"maxPrice",className:"sr-only",children:"Max Price"}),(0,t.jsx)("input",{type:"text",id:"maxPrice",name:"maxPrice",value:u.maxPrice,onChange:handleFilterChange,placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"propertyType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),(0,t.jsxs)("select",{id:"propertyType",name:"propertyType",value:u.propertyType,onChange:handleFilterChange,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),(0,t.jsx)("option",{value:"apartment",children:"Apartment"}),(0,t.jsx)("option",{value:"house",children:"House"}),(0,t.jsx)("option",{value:"villa",children:"Villa"}),(0,t.jsx)("option",{value:"studio",children:"Studio"})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"bedrooms",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bedrooms"}),(0,t.jsxs)("select",{id:"bedrooms",name:"bedrooms",value:u.bedrooms,onChange:handleFilterChange,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"",children:"Any"}),(0,t.jsx)("option",{value:"1",children:"1+"}),(0,t.jsx)("option",{value:"2",children:"2+"}),(0,t.jsx)("option",{value:"3",children:"3+"}),(0,t.jsx)("option",{value:"4",children:"4+"})]})]})]})}),(0,t.jsxs)("div",{className:"lg:w-3/4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:s.length})," properties"]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("label",{htmlFor:"sort",className:"mr-2 text-sm font-medium text-gray-700",children:"Sort by:"}),(0,t.jsxs)("select",{id:"sort",value:h,onChange:e=>p(e.target.value),className:"pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[(0,t.jsx)("option",{value:"price-asc",children:"Price: Low to High"}),(0,t.jsx)("option",{value:"price-desc",children:"Price: High to Low"}),(0,t.jsx)("option",{value:"title-asc",children:"Name: A to Z"}),(0,t.jsx)("option",{value:"title-desc",children:"Name: Z to A"})]})]})]}),s.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:s.map(e=>(0,t.jsx)(m(),{href:"/properties/".concat(e.id),className:"group block h-full",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300 h-full flex flex-col",children:[(0,t.jsx)("div",{className:"relative h-48 overflow-hidden",children:(0,t.jsx)(c(),{src:e.image,alt:e.title,fill:!0,style:{objectFit:"cover"},className:"group-hover:scale-105 transition-transform duration-300"})}),(0,t.jsxs)("div",{className:"p-4 flex-grow flex flex-col",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mt-2 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-100 flex items-center justify-between mt-auto",children:[(0,t.jsx)("span",{className:"text-blue-600 font-semibold",children:e.price}),(0,t.jsxs)("span",{className:"inline-flex items-center text-sm text-blue-600 font-medium",children:["View Details",(0,t.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No properties found"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter to find what you're looking for."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("button",{type:"button",onClick:clearFilters,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear all filters"})})]})]})]})})]})}}},function(e){e.O(0,[959,774,888,179],function(){return e(e.s=2123)}),_N_E=e.O()}]);